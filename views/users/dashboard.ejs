<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <style>
    body {
        background-color: #141A32;
    }
    div.card { margin: 15px; }
    h1.display-5 { color: #fff; }
    div.cards-container { display: flex; justify-content: space-between;  }
    p#nbRepos { font-weight: bold; color: orange; font-size: 50px; }
    p#repoSize { font-weight: bold; color: green; font-size: 50px; }
    p#nbCommits { font-weight: bold; color: blue; font-size: 50px; }
    p#another { font-weight: bold; color: red; font-size: 50px; }
    button>a { color: inherit; text-decoration: none; }
    button>a:hover { color: #fff; }
    div.d { float: left; }
    ul>li { color: #fff; }
    canvas { padding: 20px; border: 1px solid #fff; border-radius: 10px; }
    nav, div.container-fluid { background-color: #5A6583!important; }
    nav>div>a { color: #fff; }
    nav>div>a:hover { color: #141A32; text-decoration: none; }
  </style>
  <title>Dashboard</title>
</head>
<body>
  <nav class="navbar">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">Hello <%= locals.developer || "Default" %></a>
    </div>
  </nav>
  <div class="container">
    <div class="cards-container">
      <div class="d">
        <div class="card" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">Number of repositories</h5>
            <p id="nbRepos" class="card-text"><%= locals.data.length || 0 %></p>
          </div>
        </div>
      </div>
      <div class="d">
        <div class="card" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">Repositoriy average size</h5>
            <p id="repoSize" class="card-text"><%= locals.avg_size || 0 %> MB</p>
          </div>
        </div>
      </div> 
      <div class="d">
        <div class="card" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">Commits per repository</h5>
            <p id="nbCommits" class="card-text"><%= locals.avg_commits || 0 %></p>
          </div>
        </div>
      </div>
      <div class="d">
        <div class="card" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">Another info</h5>
            <p id="another" class="card-text"><%= locals.another_info || 0 %></p>
          </div>
        </div>
      </div> 
    </div>
    
    <canvas id="myChart" width="200" height="50"></canvas>

  </div>
  <% var labels = locals.labels %>
  <% var backgroundColor = locals.backgroundColor %>
  <% var labelborderColors = locals.borderColor %>
  <% var borderWidth = locals.borderWidth %>
  <% var datag = locals.datag %>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: <%- JSON.stringify(labels) %>,
            datasets: [{
                label: 'This language was used: ',
                data: <%- JSON.stringify(datag) %>,
                backgroundColor: <%- JSON.stringify(backgroundColor) %>,
                borderColor: <%- JSON.stringify(borderColor) %>,
                borderWidth: <%- JSON.stringify(borderWidth) %>,
            }]
        },
        options: {
          plugins: {
            title: {
              display: true,
              text: 'LANGUAGES REPARTITION FOR GITHUB PROJECTS',
              padding: {
                top: 10,
                bottom: 10
              },
              color: '#D2D2D7',
              font: { 
                weight: 'bold',
                size: 20
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true
            }
          }
        },
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</body>
</html>